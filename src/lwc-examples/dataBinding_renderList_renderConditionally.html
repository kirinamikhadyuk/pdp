<template>
    <div class="step step-your-offer">
        <h1 class="step-your-offer__title">{content.ETE_STEP_your_offer.accept_step_title}</h1>
        <h3 if:false={isCreditBuilderHybridActive} class="step-your-offer__subtitle editor"></h3>
        <h3 if:true={isCreditBuilderHybridActive} class="step-your-offer__credit_builder_hybrid_subtitle">
            {content.ETE_STEP_your_offer.cbh_subtitle}
        </h3>
        <button onclick={sendNewRefer}>NEW FETCH</button>
        <div class="step-your-offer__view">
            <div if:false={isCreditBuilderHybridActive} class="step-your-offer__payment-terms-header-block">
                <h3 class="step-your-offer__payment-terms-header">{content.ETE_STEP_your_offer.payment_terms_header_acc_limit_label}</h3>
                <h3 class="step-your-offer__payment-terms-header">{content.ETE_STEP_your_offer.payment_terms_header_credit_given_label}</h3>
                <h3 class="step-your-offer__payment-terms-header">
                    {content.ETE_STEP_your_offer.payment_terms_header_deposit_required_label}
                    <ui-tooltip
                            class="step-your-offer__tooltip"
                            value={content.ETE_STEP_your_offer.tooltip_deposit_required}
                    ></ui-tooltip>
                </h3>
                <h3 class="step-your-offer__payment-terms-header">{content.ETE_STEP_your_offer.payment_terms_header_terms_label}</h3>
                <h3 class="step-your-offer__payment-terms-header">{content.ETE_STEP_your_offer.payment_terms_header_method_label}</h3>
            </div>
            <div if:false={isCreditBuilderHybridActive} class="step-your-offer__payment-terms">
                <template for:each={offers} for:item="offer">
                    <c-payment-terms 
                        key={offer.id}
                        class="step-your-offer__payment-terms-item"
                        onpaymenttermschange={handlePaymentTerms}
                        offer={offer}>
                    </c-payment-terms>
                </template>
            </div>
            <div if:true={isCreditBuilderHybridActive} class="step-your-offer__payment-terms">
                <template for:each={offers} for:item="offer">
                    <c-payment-terms-credit-builder-hybrid
                            key={offer.id}
                            class="step-your-offer__payment-terms-item"
                            onpaymenttermdeselect={handleDeselectPaymentTerms}
                            onpaymenttermschange={handlePaymentTerms}
                            offer={offer}>
                    </c-payment-terms-credit-builder-hybrid>
                </template>
            </div>
        </div>
        <h3 if:false={isCreditBuilderHybridActive} class="step-your-offer__subtitle">{content.ETE_STEP_your_offer.payment_terms_bottom_text}</h3>
        <div class="step-your-offer__delimiter"></div>

        <h2 class="step-your-offer__pricing-options-title step-your-offer__pricing-options-title_center">{pricingOptionTitle}</h2>
        <div class="step-your-offer__pricing-options-container">
            <template for:each={pricingOptions} for:item="option">
                <c-payment-terms-option key={option.id}
                                        option={option}
                                        onoptionselected={handleSelect}
                                        onoptiodenselected={handleDeselect}
                ></c-payment-terms-option>
            </template>
        </div>
        <div if:false={isCreditBuilderHybridActive} class="step-your-offer__delimiter"></div>
        <div if:false={isCreditBuilderHybridActive} class="step-your-offer__deposit">
            <div class="step-your-offer__deposit-text">
                <div class="step-your-offer__deposit-title">{content.ETE_STEP_your_offer.deposit_title}</div>
                <div class="step-your-offer__deposit-subtitle">{content.ETE_STEP_your_offer.deposit_subtitle}</div>
            </div>
            <div class="step-your-offer__deposit-value" data-currency="Â£">{depositValue}</div>
        </div>
    </div>
    <c-step-navigation
            class="step-your-offer__navigation-panel"
            onnext={handleNext}
            label-next={content.ETE_STEP_your_offer.next_step_btn_title}
            error-text={content.ETE_STEP_your_offer.next_button_error}
            error={stepError}
            next-button-active={nextButtonActive}
    ></c-step-navigation>
</template>
